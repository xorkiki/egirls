{"ast":null,"code":"import React,{useState,useRef}from'react';import{motion,AnimatePresence}from'framer-motion';import{jsx as _jsx}from\"react/jsx-runtime\";const CardStack=_ref=>{let{photos,onSwipeComplete}=_ref;const[currentIndex,setCurrentIndex]=useState(0);const[exitX,setExitX]=useState(0);const[isAnimating,setIsAnimating]=useState(false);const constraintsRef=useRef(null);// Handle drag end - determine if card should be swiped away\nconst handleDragEnd=(event,info)=>{const threshold=50;// Lower threshold for more sensitivity\nconst velocity=info.velocity.x;const offset=info.offset.x;// More sensitive swipe detection - lower thresholds\nif(Math.abs(offset)>threshold||Math.abs(velocity)>200){const direction=offset>0?1:-1;// 1 for right, -1 for left\nsetExitX(direction*1000);// Move card off screen\nsetIsAnimating(true);// Immediate state update - no setTimeout delay\nsetCurrentIndex(prev=>(prev+1)%photos.length);setExitX(0);setIsAnimating(false);if(onSwipeComplete){onSwipeComplete(direction);}}};// Get visible cards (top 3-4 cards in stack)\nconst getVisibleCards=()=>{const visibleCount=Math.min(4,photos.length);const cards=[];for(let i=0;i<visibleCount;i++){const index=(currentIndex+i)%photos.length;const isTop=i===0;const stackOffset=i;cards.push({index,photo:photos[index],isTop,stackOffset,zIndex:1000-stackOffset,scale:1-stackOffset*0.05,// Slight scale down for depth\nrotation:isTop?0:(Math.random()-0.5)*10,// Random rotation for stack effect\noffsetX:isTop?0:(Math.random()-0.5)*20,// Random horizontal offset\noffsetY:isTop?0:(Math.random()-0.5)*15// Random vertical offset\n});}return cards;};const visibleCards=getVisibleCards();return/*#__PURE__*/_jsx(\"div\",{ref:constraintsRef,className:\"card-stack-container\",style:{position:'relative',width:'100%',height:'100%',display:'flex',alignItems:'center',justifyContent:'center',overflow:'hidden',touchAction:'pan-x'},children:/*#__PURE__*/_jsx(AnimatePresence,{children:visibleCards.map(card=>/*#__PURE__*/_jsx(motion.div,{// Force re-render when currentIndex changes\nclassName:\"card\",style:{position:'absolute',width:'min(280px, 85vw)',height:'min(350px, 60vh)',zIndex:card.zIndex,cursor:card.isTop?'grab':'default'},initial:{x:card.offsetX,y:card.offsetY,scale:card.scale,rotate:card.rotation,opacity:card.isTop?1:0.6},animate:{x:card.isTop?0:card.offsetX,y:card.isTop?0:card.offsetY,scale:card.scale,rotate:card.isTop?0:card.rotation,opacity:card.isTop?1:0.6},exit:{x:exitX,rotate:exitX>0?30:-30,opacity:0,scale:0.8},transition:{type:\"tween\",duration:0.2,ease:\"easeOut\"},drag:card.isTop&&!isAnimating,dragConstraints:constraintsRef,dragElastic:0.1,dragMomentum:true,onDragEnd:card.isTop?handleDragEnd:undefined,whileDrag:{scale:1.05,rotate:0,zIndex:1001},children:/*#__PURE__*/_jsx(\"img\",{src:card.photo,alt:\"Brand asset \".concat(card.index+1),style:{width:'100%',height:'100%',objectFit:'contain',display:'block',opacity:1},draggable:false,onError:e=>{console.error('Failed to load image:',card.photo);e.target.style.opacity='0.5';}})},\"\".concat(card.index,\"-\").concat(currentIndex)))})});};export default CardStack;","map":{"version":3,"names":["React","useState","useRef","motion","AnimatePresence","jsx","_jsx","CardStack","_ref","photos","onSwipeComplete","currentIndex","setCurrentIndex","exitX","setExitX","isAnimating","setIsAnimating","constraintsRef","handleDragEnd","event","info","threshold","velocity","x","offset","Math","abs","direction","prev","length","getVisibleCards","visibleCount","min","cards","i","index","isTop","stackOffset","push","photo","zIndex","scale","rotation","random","offsetX","offsetY","visibleCards","ref","className","style","position","width","height","display","alignItems","justifyContent","overflow","touchAction","children","map","card","div","cursor","initial","y","rotate","opacity","animate","exit","transition","type","duration","ease","drag","dragConstraints","dragElastic","dragMomentum","onDragEnd","undefined","whileDrag","src","alt","concat","objectFit","draggable","onError","e","console","error","target"],"sources":["/Users/kiki/Desktop/egirls/cursor-projects/egirls-website/src/components/CardStack.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nconst CardStack = ({ photos, onSwipeComplete }) => {\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [exitX, setExitX] = useState(0);\n  const [isAnimating, setIsAnimating] = useState(false);\n  const constraintsRef = useRef(null);\n\n  // Handle drag end - determine if card should be swiped away\n  const handleDragEnd = (event, info) => {\n    const threshold = 50; // Lower threshold for more sensitivity\n    const velocity = info.velocity.x;\n    const offset = info.offset.x;\n\n    // More sensitive swipe detection - lower thresholds\n    if (Math.abs(offset) > threshold || Math.abs(velocity) > 200) {\n      const direction = offset > 0 ? 1 : -1; // 1 for right, -1 for left\n      setExitX(direction * 1000); // Move card off screen\n      setIsAnimating(true);\n      \n      // Immediate state update - no setTimeout delay\n      setCurrentIndex((prev) => (prev + 1) % photos.length);\n      setExitX(0);\n      setIsAnimating(false);\n      \n      if (onSwipeComplete) {\n        onSwipeComplete(direction);\n      }\n    }\n  };\n\n  // Get visible cards (top 3-4 cards in stack)\n  const getVisibleCards = () => {\n    const visibleCount = Math.min(4, photos.length);\n    const cards = [];\n    \n    for (let i = 0; i < visibleCount; i++) {\n      const index = (currentIndex + i) % photos.length;\n      const isTop = i === 0;\n      const stackOffset = i;\n      \n      cards.push({\n        index,\n        photo: photos[index],\n        isTop,\n        stackOffset,\n        zIndex: 1000 - stackOffset,\n        scale: 1 - (stackOffset * 0.05), // Slight scale down for depth\n        rotation: isTop ? 0 : (Math.random() - 0.5) * 10, // Random rotation for stack effect\n        offsetX: isTop ? 0 : (Math.random() - 0.5) * 20, // Random horizontal offset\n        offsetY: isTop ? 0 : (Math.random() - 0.5) * 15 // Random vertical offset\n      });\n    }\n    \n    return cards;\n  };\n\n  const visibleCards = getVisibleCards();\n\n  return (\n    <div \n      ref={constraintsRef}\n      className=\"card-stack-container\"\n      style={{\n        position: 'relative',\n        width: '100%',\n        height: '100%',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        overflow: 'hidden',\n        touchAction: 'pan-x'\n      }}\n    >\n      <AnimatePresence>\n        {visibleCards.map((card) => (\n          <motion.div\n            key={`${card.index}-${currentIndex}`} // Force re-render when currentIndex changes\n            className=\"card\"\n            style={{\n              position: 'absolute',\n              width: 'min(280px, 85vw)',\n              height: 'min(350px, 60vh)',\n              zIndex: card.zIndex,\n              cursor: card.isTop ? 'grab' : 'default'\n            }}\n            initial={{\n              x: card.offsetX,\n              y: card.offsetY,\n              scale: card.scale,\n              rotate: card.rotation,\n              opacity: card.isTop ? 1 : 0.6\n            }}\n            animate={{\n              x: card.isTop ? 0 : card.offsetX,\n              y: card.isTop ? 0 : card.offsetY,\n              scale: card.scale,\n              rotate: card.isTop ? 0 : card.rotation,\n              opacity: card.isTop ? 1 : 0.6\n            }}\n            exit={{\n              x: exitX,\n              rotate: exitX > 0 ? 30 : -30,\n              opacity: 0,\n              scale: 0.8\n            }}\n            transition={{\n              type: \"tween\",\n              duration: 0.2,\n              ease: \"easeOut\"\n            }}\n            drag={card.isTop && !isAnimating}\n            dragConstraints={constraintsRef}\n            dragElastic={0.1}\n            dragMomentum={true}\n            onDragEnd={card.isTop ? handleDragEnd : undefined}\n            whileDrag={{\n              scale: 1.05,\n              rotate: 0,\n              zIndex: 1001\n            }}\n          >\n            <img\n              src={card.photo}\n              alt={`Brand asset ${card.index + 1}`}\n              style={{\n                width: '100%',\n                height: '100%',\n                objectFit: 'contain',\n                display: 'block',\n                opacity: 1\n              }}\n              draggable={false}\n              onError={(e) => {\n                console.error('Failed to load image:', card.photo);\n                e.target.style.opacity = '0.5';\n              }}\n            />\n          </motion.div>\n        ))}\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default CardStack;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,KAAQ,OAAO,CAC/C,OAASC,MAAM,CAAEC,eAAe,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAExD,KAAM,CAAAC,SAAS,CAAGC,IAAA,EAAiC,IAAhC,CAAEC,MAAM,CAAEC,eAAgB,CAAC,CAAAF,IAAA,CAC5C,KAAM,CAACG,YAAY,CAAEC,eAAe,CAAC,CAAGX,QAAQ,CAAC,CAAC,CAAC,CACnD,KAAM,CAACY,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,CAAC,CAAC,CACrC,KAAM,CAACc,WAAW,CAAEC,cAAc,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAAAgB,cAAc,CAAGf,MAAM,CAAC,IAAI,CAAC,CAEnC;AACA,KAAM,CAAAgB,aAAa,CAAGA,CAACC,KAAK,CAAEC,IAAI,GAAK,CACrC,KAAM,CAAAC,SAAS,CAAG,EAAE,CAAE;AACtB,KAAM,CAAAC,QAAQ,CAAGF,IAAI,CAACE,QAAQ,CAACC,CAAC,CAChC,KAAM,CAAAC,MAAM,CAAGJ,IAAI,CAACI,MAAM,CAACD,CAAC,CAE5B;AACA,GAAIE,IAAI,CAACC,GAAG,CAACF,MAAM,CAAC,CAAGH,SAAS,EAAII,IAAI,CAACC,GAAG,CAACJ,QAAQ,CAAC,CAAG,GAAG,CAAE,CAC5D,KAAM,CAAAK,SAAS,CAAGH,MAAM,CAAG,CAAC,CAAG,CAAC,CAAG,CAAC,CAAC,CAAE;AACvCV,QAAQ,CAACa,SAAS,CAAG,IAAI,CAAC,CAAE;AAC5BX,cAAc,CAAC,IAAI,CAAC,CAEpB;AACAJ,eAAe,CAAEgB,IAAI,EAAK,CAACA,IAAI,CAAG,CAAC,EAAInB,MAAM,CAACoB,MAAM,CAAC,CACrDf,QAAQ,CAAC,CAAC,CAAC,CACXE,cAAc,CAAC,KAAK,CAAC,CAErB,GAAIN,eAAe,CAAE,CACnBA,eAAe,CAACiB,SAAS,CAAC,CAC5B,CACF,CACF,CAAC,CAED;AACA,KAAM,CAAAG,eAAe,CAAGA,CAAA,GAAM,CAC5B,KAAM,CAAAC,YAAY,CAAGN,IAAI,CAACO,GAAG,CAAC,CAAC,CAAEvB,MAAM,CAACoB,MAAM,CAAC,CAC/C,KAAM,CAAAI,KAAK,CAAG,EAAE,CAEhB,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGH,YAAY,CAAEG,CAAC,EAAE,CAAE,CACrC,KAAM,CAAAC,KAAK,CAAG,CAACxB,YAAY,CAAGuB,CAAC,EAAIzB,MAAM,CAACoB,MAAM,CAChD,KAAM,CAAAO,KAAK,CAAGF,CAAC,GAAK,CAAC,CACrB,KAAM,CAAAG,WAAW,CAAGH,CAAC,CAErBD,KAAK,CAACK,IAAI,CAAC,CACTH,KAAK,CACLI,KAAK,CAAE9B,MAAM,CAAC0B,KAAK,CAAC,CACpBC,KAAK,CACLC,WAAW,CACXG,MAAM,CAAE,IAAI,CAAGH,WAAW,CAC1BI,KAAK,CAAE,CAAC,CAAIJ,WAAW,CAAG,IAAK,CAAE;AACjCK,QAAQ,CAAEN,KAAK,CAAG,CAAC,CAAG,CAACX,IAAI,CAACkB,MAAM,CAAC,CAAC,CAAG,GAAG,EAAI,EAAE,CAAE;AAClDC,OAAO,CAAER,KAAK,CAAG,CAAC,CAAG,CAACX,IAAI,CAACkB,MAAM,CAAC,CAAC,CAAG,GAAG,EAAI,EAAE,CAAE;AACjDE,OAAO,CAAET,KAAK,CAAG,CAAC,CAAG,CAACX,IAAI,CAACkB,MAAM,CAAC,CAAC,CAAG,GAAG,EAAI,EAAG;AAClD,CAAC,CAAC,CACJ,CAEA,MAAO,CAAAV,KAAK,CACd,CAAC,CAED,KAAM,CAAAa,YAAY,CAAGhB,eAAe,CAAC,CAAC,CAEtC,mBACExB,IAAA,QACEyC,GAAG,CAAE9B,cAAe,CACpB+B,SAAS,CAAC,sBAAsB,CAChCC,KAAK,CAAE,CACLC,QAAQ,CAAE,UAAU,CACpBC,KAAK,CAAE,MAAM,CACbC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,MAAM,CACfC,UAAU,CAAE,QAAQ,CACpBC,cAAc,CAAE,QAAQ,CACxBC,QAAQ,CAAE,QAAQ,CAClBC,WAAW,CAAE,OACf,CAAE,CAAAC,QAAA,cAEFpD,IAAA,CAACF,eAAe,EAAAsD,QAAA,CACbZ,YAAY,CAACa,GAAG,CAAEC,IAAI,eACrBtD,IAAA,CAACH,MAAM,CAAC0D,GAAG,EAC6B;AACtCb,SAAS,CAAC,MAAM,CAChBC,KAAK,CAAE,CACLC,QAAQ,CAAE,UAAU,CACpBC,KAAK,CAAE,kBAAkB,CACzBC,MAAM,CAAE,kBAAkB,CAC1BZ,MAAM,CAAEoB,IAAI,CAACpB,MAAM,CACnBsB,MAAM,CAAEF,IAAI,CAACxB,KAAK,CAAG,MAAM,CAAG,SAChC,CAAE,CACF2B,OAAO,CAAE,CACPxC,CAAC,CAAEqC,IAAI,CAAChB,OAAO,CACfoB,CAAC,CAAEJ,IAAI,CAACf,OAAO,CACfJ,KAAK,CAAEmB,IAAI,CAACnB,KAAK,CACjBwB,MAAM,CAAEL,IAAI,CAAClB,QAAQ,CACrBwB,OAAO,CAAEN,IAAI,CAACxB,KAAK,CAAG,CAAC,CAAG,GAC5B,CAAE,CACF+B,OAAO,CAAE,CACP5C,CAAC,CAAEqC,IAAI,CAACxB,KAAK,CAAG,CAAC,CAAGwB,IAAI,CAAChB,OAAO,CAChCoB,CAAC,CAAEJ,IAAI,CAACxB,KAAK,CAAG,CAAC,CAAGwB,IAAI,CAACf,OAAO,CAChCJ,KAAK,CAAEmB,IAAI,CAACnB,KAAK,CACjBwB,MAAM,CAAEL,IAAI,CAACxB,KAAK,CAAG,CAAC,CAAGwB,IAAI,CAAClB,QAAQ,CACtCwB,OAAO,CAAEN,IAAI,CAACxB,KAAK,CAAG,CAAC,CAAG,GAC5B,CAAE,CACFgC,IAAI,CAAE,CACJ7C,CAAC,CAAEV,KAAK,CACRoD,MAAM,CAAEpD,KAAK,CAAG,CAAC,CAAG,EAAE,CAAG,CAAC,EAAE,CAC5BqD,OAAO,CAAE,CAAC,CACVzB,KAAK,CAAE,GACT,CAAE,CACF4B,UAAU,CAAE,CACVC,IAAI,CAAE,OAAO,CACbC,QAAQ,CAAE,GAAG,CACbC,IAAI,CAAE,SACR,CAAE,CACFC,IAAI,CAAEb,IAAI,CAACxB,KAAK,EAAI,CAACrB,WAAY,CACjC2D,eAAe,CAAEzD,cAAe,CAChC0D,WAAW,CAAE,GAAI,CACjBC,YAAY,CAAE,IAAK,CACnBC,SAAS,CAAEjB,IAAI,CAACxB,KAAK,CAAGlB,aAAa,CAAG4D,SAAU,CAClDC,SAAS,CAAE,CACTtC,KAAK,CAAE,IAAI,CACXwB,MAAM,CAAE,CAAC,CACTzB,MAAM,CAAE,IACV,CAAE,CAAAkB,QAAA,cAEFpD,IAAA,QACE0E,GAAG,CAAEpB,IAAI,CAACrB,KAAM,CAChB0C,GAAG,gBAAAC,MAAA,CAAiBtB,IAAI,CAACzB,KAAK,CAAG,CAAC,CAAG,CACrCc,KAAK,CAAE,CACLE,KAAK,CAAE,MAAM,CACbC,MAAM,CAAE,MAAM,CACd+B,SAAS,CAAE,SAAS,CACpB9B,OAAO,CAAE,OAAO,CAChBa,OAAO,CAAE,CACX,CAAE,CACFkB,SAAS,CAAE,KAAM,CACjBC,OAAO,CAAGC,CAAC,EAAK,CACdC,OAAO,CAACC,KAAK,CAAC,uBAAuB,CAAE5B,IAAI,CAACrB,KAAK,CAAC,CAClD+C,CAAC,CAACG,MAAM,CAACxC,KAAK,CAACiB,OAAO,CAAG,KAAK,CAChC,CAAE,CACH,CAAC,KAAAgB,MAAA,CA5DMtB,IAAI,CAACzB,KAAK,MAAA+C,MAAA,CAAIvE,YAAY,CA6DxB,CACb,CAAC,CACa,CAAC,CACf,CAAC,CAEV,CAAC,CAED,cAAe,CAAAJ,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}